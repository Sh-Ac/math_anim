from manimlib.imports import *
import numpy as np

class WaterTank(Scene):
    def construct(self):
        self.level()
        self.wait(2)

    def level(self):
        self.tank = VGroup(Line(2*UL+UP, 2*DL+DOWN),
                        Line(2*DL+DOWN , 2*DR+DOWN),
                        Line(2*DR+DOWN , 2*UR+UP))
        self.tank.set_color(LIGHT_GREY)
        # self.origin = SmallDot(color = RED)
        self.hbar = DashedLine(2*UL+DOWN+2.5*LEFT, 2*UR+DOWN+2.5*RIGHT, color= YELLOW_C, stroke_width = 3)
        self.water = Polygon(2*UL+DOWN, 2*DL+DOWN, 2*DR+DOWN, 2*UR+DOWN, fill_color = BLUE_C, stroke_width = 0,fill_opacity = 0.5)
        self.hbar_label = TexMobject(r"{\bar{h}}", color = YELLOW_C).scale(0.8)
        self.hbar_label.next_to(self.hbar, LEFT, buff = SMALL_BUFF)

        vertex1 =  self.water.get_vertices()[0]
        vertex23 = self.water.get_vertices()[1:3]
        vertex4 =  self.water.get_vertices()[3]
        # delta_h = [0.1, 0.2, -0.5]
        delta_h = [1.945398229144943, 1.8919890611749743, 1.8397487283163516, 1.7886539146557485, 1.7386817477784067, 1.6898097905585001, 1.6420160330989888, 1.5952788848182682, 1.5495771666809537, 1.5048901035702125, 1.4611973167990988, 1.4184788167583664, 1.3767149956983145, 1.3358866206422426, 1.2959748264291446, 1.2569611088833024, 1.2188273181084983, 1.1815556519045967, 1.1451286493042794, 1.1095291842277801, 1.0747404592534702, 1.0407459995022164, 1.0075296466334616, 0.9750755529509835, 0.9433681756163979, 0.9123922709684056, 0.8821328889459167, 0.8525753676131503, 0.8237053277848798, 0.7955086677500068, 0.767971558091687, 0.7410804366022669, 0.7148220032913167, 0.6891832154850651, 0.6641512830156028, 0.6397136634982105, 0.6158580576952332, 0.5925724049649229, 0.5698448787937223, 0.5476638824104696, 0.5260180444810493, 0.5048962148820297, 0.4842874605518557, 0.46418106141819204, 0.44456650640004447, 0.4254334894832918, 0.4067719058683117, 0.38857184818838475, 0.3708236027975993, 0.3535176461269933, 0.33664464110769954, 0.3201954336598764, 0.30416104924623477, 0.28853268948898364, 0.27330172884905074, 0.2584597113664418, 0.24399834746063512, 0.22990951078991625, 0.2161852351685857, 0.20281771154098965, 0.18979928501133855, 0.17712245192830342, 0.16477985702339404, 0.1527642906021399, 0.14106868578711715, 0.12968611581187822, 0.11860979136485643, 0.1078330579823411, 0.09734939348962765, 0.08715240548946745, 0.07723582889695707, 0.06759352352002167, 0.058219471684662835, 0.049107775904155916, 0.04025265659139738, 0.03164844981361531, 0.023289605088672415, 0.015170683222203545, 0.007286354184843821, -0.0003686049711834823, -0.007799312156836285, -0.015010782253085112, -0.022007929080498246, -0.028795567332259665, -0.0353784144712874, -0.04176109259210661, -0.04794813024812102, -0.053943964244914266, -0.05975294140020109, -0.06537932027103781, -0.07082727284888922, -0.07610088622314043, -0.08120416421362893, -0.08614102897276363, -0.0909153225577871, -0.09553080847372634, -0.09999117318756881, -0.10430002761418886, -0.10846090857454334, -0.11247728022664143, -0.11635253546979005, -0.12008999732260059, -0.12369292027524081, -0.12716449161640137, -0.13050783273544134, -0.13372600040016727, -0.1368219880106922, -0.13979872682981356, -0.14265908719034137, -0.14540587967979596, -0.1480418563028966, -0.15056971162224225, -0.15299208387758828, -0.15531155608411304, -0.15753065711005604, -0.15965186273411106, -0.16167759668294343, -0.1636102316491983, -0.16545209029035737, -0.1672054462087967, -0.16887252491339255, -0.17045550476301277, -0.1719565178922283, -0.17337765111957204, -0.17472094683866587, -0.1759884038925318, -0.17718197843139735, -0.17830358475429867, -0.1793550961347801, -0.1803383456309845, -0.1812551268804201, -0.18210719487968915, -0.1828962667494541, -0.1836240224849141, -0.1842921056920597, -0.18490212430996864, -0.18545565131940045, -0.1859542254379414, -0.18639935180195258, -0.1867925026355601, -0.18713511790693094, -0.1874286059720674, -0.18767434420635323, -0.18787367962407578, -0.18802792948614863, -0.18813838189625312, -0.1882062963856125, -0.18823290448661048, -0.1882194102954596, -0.18816699102412504, -0.18807679754169992, -0.18794995490543123, -0.18778756288158563, -0.18759069645634657, -0.18736040633692505, -0.18709771944306847, -0.18680363938914474, -0.18647914695697676, -0.18612520055960144, -0.18574273669611785, -0.18533267039779583, -0.1848958956656031, -0.18443328589931474, -0.1839456943183578, -0.18343395437454907, -0.18289888015687428, -0.18234126678845888, -0.1817618908158759, -0.18116151059093338, -0.18054086664508182, -0.17990068205658077, -0.1792416628105585, -0.17856449815209807, -0.17786986093248094, -0.1771584079487154, -0.17643078027647596, -0.17568760359657545, -0.17492948851509557, -0.1741570308772882, -0.1733708120753703, -0.17257139935032315, -0.17175934608781002, -0.17093519210832261, -0.17009946395166392, -0.16925267515587447, -0.1683953265307073, -0.16752790642575227, -0.16665089099331168, -0.16576474444612546, -0.16486991931004424, -0.16396685667174254, -0.16305598642156882, -0.16213772749162234, -0.16121248808914712, -0.16028066592533155, -0.15934264843959955, -0.15839881301948083, -0.1574495272161407, -0.156495148955654, -0.15553602674610126, -0.15457249988056923, -0.15360489863613033, -0.15263354446887947, -0.15165875020510133, -0.15068082022864185, -0.14970005066455758, -0.14871672955911086, -0.14773113705618188, -0.14674354557016597, -0.14575421995542154, -0.14476341767233547, -0.14377138895007024, -0.14277837694605514, -0.14178461790228433, -0.1407903412984825, -0.1397957700021974, -0.13880112041587878, -0.13780660262100086, -0.13681242051928333, -0.13581877197106954, -0.1348258489309129, -0.13383383758042733, -0.1328429184584529, -0.131853266588588, -0.13086505160413953, -0.1298784378705399, -0.12889358460527872, -0.12791064599539892, -0.12692977131260258, -0.1259511050260117, -0.1249747869126317, -0.12400095216555947, -0.12302973149997921, -0.12206125125699127, -0.12109563350531338, -0.12013299614089595, -0.1191734529844921, -0.11821711387722177, -0.11726408477416826, -0.11631446783604606, -0.11536836151897659, -0.1144258606624088, -0.11348705657522055, -0.11255203712003631, -0.11162088679579525, -0.11069368681860417, -0.10977051520090844, -0.10885144682901379, -0.10793655353899088, -0.10702590419099413, -0.1061195647420257, -0.10521759831717574, -0.10432006527936702, -0.10342702329763491, -0.10253852741397029, -0.10165463010875346, -0.10077538136480758, -0.0999008287300973, -0.09903101737910083, -0.09816599017287969, -0.09730578771787333, -0.09645044842344244, -0.09560000855818629, -0.09475450230505816, -0.09391396181530215, -0.09307841726123527, -0.09224789688789657, -0.09142242706358743, -0.09060203232932248, -0.08978673544721526, -0.08897655744781806, -0.08817151767643673, -0.08737163383844217, -0.08657692204359675, -0.08578739684941586, -0.08500307130358484, -0.0842239569854479, -0.08345006404658967, -0.08268140125052637, -0.08191797601152453, -0.08115979443256433, -0.08040686134246641, -0.07965918033219585, -0.07891675379036349, -0.07817958293793707, -0.07744766786218067, -0.076721007549837, -0.07599959991956783, -0.07528344185366732, -0.07457252922906354, -0.07386685694762145, -0.07316641896576302, -0.07247120832341673, -0.07178121717231134, -0.07109643680362578, -0.0704168576750103, -0.069742469436989, -0.06907326095875935, -0.06840922035339786, -0.06775033500248692, -0.06709659158017195, -0.06644797607666325, -0.06580447382119109, -0.0651660695044275, -0.06453274720038489, -0.06390449038780148, -0.06328128197102574, -0.06266310430040833, -0.06204993919221315, -0.06144176794805684, -0.06083857137388625, -0.060240329798504, -0.059647023091650965, -0.059058630681655275, -0.05847513157265653, -0.057896504361414414, -0.057322727253709946, -0.0567537780803483, -0.05618963431277129, -0.05563027307828739, -0.05507567117492827, -0.0545258050859384, -0.0539806509939067, -0.05344018479454637, -0.052904382110132, -0.0523732183025996, -0.05184666848631781, -0.051324707540536536, -0.0508073101215204, -0.05029445067437312, -0.04978610344456019, -0.04928224248913543, -0.04878284168767814, -0.04828787475294735, -0.04779731524125871, -0.04731113656258993, -0.046829311990421486, -0.04635181467131697, -0.04587861763424978, -0.04540969379968124, -0.04494501598839542, -0.04448455693009603, -0.04402828927177074, -0.043576185585827674, -0.04312821837800926, -0.042684360095088324, -0.04224458313235104, -0.04180885984087141, -0.04137716253458225, -0.04094946349714649, -0.04052573498863384, -0.04010594925200673, -0.039690078519419886, -0.039278095018337796, -0.038869970977474064, -0.038465678632556045, -0.03806519023191987, -0.037668478041938645, -0.03727551435228793, -0.03688627148105231, -0.03650072177967617, -0.036118837637762996, -0.035740591487725536, -0.0353659558092915, -0.03499490313386693, -0.0346274060487612, -0.03426343720127659, -0.03390296930266557, -0.03354597513195886, -0.03319242753966704, -0.03284229945135914, -0.03249556387112051, -0.03215219388489305, -0.03181216266370054, -0.03147544346676202, -0.031142009644495018, -0.030811834641412263, -0.030484891998913653, -0.03016115535797627, -0.029840598461744937, -0.02952319515802536, -0.029208919401682607, -0.02889774525694678, -0.028589646899628472, -0.028284598619246037, -0.027982574821066634, -0.027683550028063515, -0.02738749888279126, -0.02709439614918127, -0.0268042167142592, -0.026516935589786395, -0.026232527913827186, -0.02595096895224405, -0.025672234100122027, -0.025396298883124675, -0.025123138958782914, -0.02485273011771859, -0.024585048284804394, -0.024320069520261813, -0.02405777002069865, -0.023798126120087523, -0.023541114290687278, -0.023286711143908345, -0.02303489343112362, -0.022785638044426616, -0.02253892201733775, -0.022294722525460574, -0.02205301688708899, -0.021813782563766988, -0.02157699716080192, -0.021342638427732936, -0.0211106842587553, -0.02088111269310223, -0.020653901915385256, -0.02042903025589414, -0.02020647619085771, -0.019986218342666458, -0.01976823548005811, -0.019552506518267253, -0.0193390105191399, -0.01912772669121408, -0.018918634389767538, -0.01871171311683317, -0.018506942521183505, -0.01830430239828497, -0.018103772690222827, -0.017905333485597676, -0.017708965019394347, -0.01751464767282415, -0.0173223619731411, -0.01713208859343302, -0.01694380835238838, -0.01675750221403946, -0.016573151287482723, -0.01639073682657705, -0.016210240229620504, -0.016031643039006612, -0.015854926940860263, -0.015680073764654585, -0.015507065482808849, -0.01533588421026843, -0.015166512204067223, -0.014998931862873207, -0.014833125726517746, -0.014669076475509172, -0.014506766930531195, -0.01434618005192679, -0.014187298939167953, -0.014030106830311952, -0.013874587101444558, -0.0137207232661107, -0.013568498974733135, -0.01341789801401952, -0.013268904306358393, -0.013121501909204459, -0.0129756750144537, -0.012831407947808692, -0.012688685168134543, -0.01254749126680587, -0.01240781096704526, -0.012269629123253502, -0.012132930720332065, -0.011997700872998148, -0.011863924825092641, -0.011731587948881472, -0.011600675744350447, -0.011471173838494145, -0.011343067984599104, -0.01121634406152162, -0.011090988072960382, -0.010966986146724448, -0.010844324533996634, -0.010722989608592776, -0.010602967866216983, -0.01048424592371332, -0.010366810518314047, -0.010250648506884716, -0.010135746865166466, -0.010022092687015524, -0.009909673183640454, -0.009798475682837173, -0.009688487628221927, -0.009579696578462705, -0.009472090206508937, -0.00936565629882007, -0.009260382754592835, -0.009156257584987742, -0.009053268912354735, -0.008951404969458348, -0.008850654098702494, -0.008751004751354995, -0.008652445486772114, -0.008554964971623263, -0.008458551979115918, -0.008363195388220994, -0.008268884182898879, -0.008175607451326065, -0.008083354385122813, -0.007992114278581711, -0.00790187652789743, -0.007812630630397721, -0.007724366183775813, -0.007637072885324338, -0.007550740531170868, -0.0074653590155151885, -0.00738091832986844, -0.00729740856229419, -0.007214819896651576, -0.007133142611840585, -0.00705236708104959, -0.006972483771005242, -0.006893483241224746, -0.006815356143270694, -0.006738093220008461, -0.006661685304866283, -0.0065861233210981, -0.006511398281049183, -0.006437501285424707, -0.006364423522561229, -0.006292156267701258, -0.006220690882270844, -0.006150018813160367, -0.006080131592008526, -0.006011020834489584, -0.005942678239603921, -0.005875095588971975, -0.005808264746131598, -0.005742177655838856, -0.005676826343372361, -0.0056122029138411435, -0.005548299551496119, -0.0054851085190451765, -0.00542262215697195, -0.005360832882858283, -0.005299733190710427, -0.0052393156502890045, -0.005179572906442779, -0.005120497678446248, -0.0050620827593410665, -0.005004321015281365, -0.004947205384882971, -0.004890728878576531, -0.004834884577964598, -0.00477966563518265, -0.004725065272264108, -0.004671076780509352, -0.004617693519858725, -0.004564908918269541, -0.004512716471097203, -0.004461109740480289, -0.004410082354729725, -0.00435962800772202, -0.0043097404582965754, -0.004260413529657072, -0.004211641108776927, -0.004163417145808875, -0.00411573565349859, -0.004068590706602452, -0.0040219764413093875, -0.003975887054666801, -0.003930316804010618, -0.0038852600063994254, -0.0038407110380526827, -0.0037966643337930626, -0.0037531143864928634, -0.0037100557465244806, -0.003667483021215008, -0.003625390874304877, -0.003583774025410569, -0.0035426272494914137, -0.0035019453763204004, -0.003461723289959075, -0.0034219559282364434, -0.0033826382822319287, -0.003343765395762316, -0.003305332364872742, -0.003267334337331631, -0.0032297665121296744, -0.003192624138982732, -0.0031559025178387215, -0.003119596998388449, -0.0030837029795803637, -0.0030482159091392534, -0.003013131283088816, -0.0029784446452781554, -0.002944151586912127, -0.0029102477460855565, -0.0028767288073212995, -0.002843590501112126, -0.002810828603466438, -0.00277843893545775, -0.002746417362777971, -0.0027147597952944446, -0.0026834621866107266, -0.002652520533631087, -0.0026219308761287327, -0.00259168929631771, -0.0025617919184284677, -0.0025322349082870974]
        dh = delta_h[0]
        self.water = Polygon(vertex1+dh*UP, *vertex23, vertex4+dh*UP, fill_color = BLUE_C, stroke_width = 0,fill_opacity = 0.5)
        self.add(self.tank, self.hbar, self.water, self.hbar_label)

        for dh in delta_h[1:]:
            self.water1 = Polygon(vertex1+dh*UP, *vertex23, vertex4+dh*UP, fill_color = BLUE_C, stroke_width = 0,fill_opacity = 0.5)
            self.play(Transform(self.water,self.water1), run_time=0.1)
            # self.wait(0.1)
        # print(self.water.get_vertices())
