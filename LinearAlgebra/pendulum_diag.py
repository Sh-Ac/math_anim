from manimlib.imports import *
import numpy as np
class InvertedPendulum(Scene):
    def construct(self):
        self.setup()
        # pendulum1 = self.pendulum.copy()
        # self.play(ReplacementTransform(self.pendulum, pendulum1))
        # self.wait(3)
        self.pendulum = VGroup(self.rod, self.bob)
        # nspf = 80
        # angles = np.linspace(-20, 20, nspf)
        angles = [-1.7164904667302827, -1.4659949798556504, -1.2470476492754403, -1.0572411185775874, -0.8936784572859209, -0.7533098027225275, -0.6331540485717598, -0.5304278048459052, -0.4426083347127913, -0.3674535856213277, -0.30299654524925296, -0.24752564722362977, -0.19955869238658067, -0.15781476962186472, -0.12118670154230893, -0.08871531268897732, -0.05956607913649067, -0.03300829244540301, -0.008396638539274344, 0.014845023857810887, 0.037237948504821865, 0.059261123400355, 0.08136249039746206, 0.10396900198332981, 0.1274957272098559, 0.15235418874410828, 0.17896008092958798, 0.2077404838881319, 0.23914064921906117, 0.2736303858808722, 0.3117100163482285, 0.35391579781401145, 0.40082460431919115, 0.4530575350888264, 0.5112819428349293, 0.5762111542660137, 0.6486008770946365, 0.729240954630702, 0.818940757914218, 0.9185061431973489, 1.0287056446844032, 1.1502235839756574, 1.283598309593703, 1.4291451596180198, 1.5868663041383375, 1.756353553057926, 1.9366952576200152, 2.1264035834588633, 2.3233817644202603, 2.524949958119129, 2.7279410251216927, 2.928864048825104, 3.1241169950921885, 3.3102164023313305, 3.484007047524462, 3.6428203924033764, 3.7845647103909426, 3.907746335285378, 4.011434723390668, 4.095190903390397, 4.158979490601591, 4.203080843496264, 4.228014625846912, 4.234480856557185, 4.223320400562146, 4.195493958047304, 4.15207672567913, 4.094264701224862, 4.023387816591694, 3.940924594133355, 3.8485128622689038, 3.747951386973745, 3.641188251201438, 3.5302935348204607, 3.417416209093212, 3.304727811291523, 3.1943578594624595, 3.0883275203814473, 2.9884883470112458, 2.896471888861065, 2.8136539563950818, 2.7411348487537333, 2.6797345369149492, 2.6300000882906387, 2.592221731734417, 2.5664538629992744, 2.55253779106036, 2.5501238782091664, 2.558691702204603, 2.5775677942095854, 2.605941271302522, 2.6428782269863658, 2.6873360416727197, 2.7381788250044505, 2.7941950196797825, 2.854117819557557, 2.9166485440331424, 2.9804825484584763, 3.044336731702581, 3.1069773176826163, 3.1672464048659594, 3.2240858232956393, 3.2765570930443673, 3.323856681231634, 3.365326223338527, 3.4004578228736357, 3.4288949027625724, 3.450429311953108, 3.464995482391888, 3.4726624013187166, 3.473624044939449, 3.4681887519311636, 3.4567678374886843, 3.4398635925430088, 3.4180567005596956, 3.3919930476416225, 3.362369902056697, 3.3299214893892986, 3.2954040748114135, 3.259580765472807, 3.223206343218239, 3.1870125120695527, 3.151693982336185, 3.1178958070371143, 3.086202337550334, 3.0571280821369564, 3.031110646264005, 3.0085058225956613, 2.9895847953725108, 2.974533339622032, 2.963452836567629, 2.956362894140976, 2.953205352821622, 2.953849466332621, 2.9580980667675396, 2.965694547261458, 2.976330516240794, 2.9896539913899867, 3.005278006797564, 3.0227895035322683, 3.0417583642410166, 3.061746439602947, 3.0823164025140195, 3.1030402584283734, 3.1235073402441373, 3.1433316251292345, 3.1621582289209282, 3.179668960004514, 3.1955868466093458, 3.209679586363641, 3.221761901726626, 3.231696816928557, 3.2393958993563614, 3.2448185298594217, 3.247970282027246, 3.2489005006582334, 3.247699175451313, 3.244493208697826, 3.2394421766916484, 3.232733684738856, 3.224578415695745, 3.215204972142285, 3.204854612469261, 3.193775980890703, 3.1822199300968745, 3.1704345323288448, 3.1586603695908466, 3.1471261862449365, 3.1360449773474617, 3.1256105740566524, 3.1159947737652627, 3.1073450479496043, 3.0997828457979235, 3.093402497180559, 3.088270705039384, 3.0844266052347513, 3.081882361546357, 3.0806242549605107, 3.0806142195315, 3.0817917718255172, 3.08407627704433, 3.087369492186492, 3.091558324876314, 3.096517745671789, 3.1021137917084345, 3.108206600454576, 3.1146534141826674, 3.1213114985453156, 3.128040922408652, 3.1347071508251716, 3.1411834086564316, 3.1473527787607063, 3.153110005669613, 3.1583629830810516, 3.1630339110652983, 3.167060116387471, 3.1703945365818265, 3.1730058751916883, 3.1748784417728335, 3.1760116957506637, 3.1764195179644434, 3.1761292377011547, 3.1751804462175874, 3.173623630188575, 3.171518660225855, 3.168933170612246, 3.16594086671513, 3.162619796205516, 3.15905061923941, 3.1553149111850334, 3.1514935293394957, 3.1476650724182806, 3.1439044584806792, 3.140281643446927, 3.1368604985530943, 3.1336978610714223, 3.130842768495406, 3.128335882249156, 3.126209102924127, 3.124485375159731, 3.123178676642869, 3.122294182368002, 3.121828592323022, 3.1217706081833256, 3.122101542431587, 3.1227960415877933, 3.12382290393896, 3.1251459712984877, 3.1267250738937316, 3.1285170074638717, 3.1304765220299107, 3.1325573025513718, 3.1347129227814055, 3.1368977550396413, 3.1390678203017086, 3.1411815649124235, 3.1432005523192523, 3.1450900604441703, 3.1468195776142607, 3.148363192303487, 3.149699874250701, 3.150813646765456, 3.1516936521713714, 3.15233411432901, 3.1527342039943864, 3.152897814379221, 3.152833255664435, 3.152552878364359, 3.152072636336482, 3.1514116008762323, 3.1505914377287234, 3.1496358589946993, 3.148570061815278, 3.1474201654024596, 3.1462126574560325, 3.1449738602923096, 3.1437294261281115, 3.142503869939529, 3.1413201471755308, 3.140199282379153, 3.1391600534821977, 3.138218735221363, 3.137388903802, 3.136681303636882, 3.1361037757358567, 3.135661246140505, 3.1353557717057456, 3.1351866395445103, 3.135150515586193, 3.1352416369652762, 3.1354520423609653, 3.1357718339565572, 3.1361894643801445, 3.1366920418249715, 3.137265646524403, 3.1378956518668772, 3.1385670436716286, 3.139264731496054, 3.139973846297991, 3.140680019317279, 3.141369637656019, 3.142030072710447, 3.1426498783231422, 3.1432189562667525, 3.143728687423176, 3.144172027770492, 3.144543569018969, 3.144839564434172, 3.1450579210373877, 3.1451981599707137, 3.145261347347353, 3.1452499983694944, 3.1451679578815055, 3.145020260830815, 3.1448129763312984, 3.1445530391635246, 3.1442480726045563, 3.1439062064595573, 3.143535894072802, 3.143145731932019, 3.142744285253926, 3.1423399226577446, 3.141940662705533, 3.141554034721918, 3.1411869559104764, 3.140845626368387, 3.1405354431744397, 3.1402609342967054, 3.140025712643754, 3.1398324501750983, 3.1396828715998226, 3.1395777668336873, 3.1395170210598975, 3.1394996609520427, 3.1395239153729406, 3.139587288663182, 3.1396866444797182, 3.139818298038471, 3.1399781145556154, 3.1401616116686726, 3.1403640636488626, 3.140580605287725, 3.140806333450144, 3.1410364044290917, 3.141266125409678, 3.1414910385473007, 3.141706996380975, 3.1419102275341633, 3.14209739189539, 3.1422656247151903, 3.1424125692992604, 3.1425363982153853, 3.1426358231595053, 3.1427100938400967, 3.142758986436551, 3.1427827823632835, 3.1427822382245556, 3.1427585479735773, 3.142713298392039, 3.142648419082025, 3.142566128211233, 3.142468875274829, 3.1423592821338975, 3.1422400835628492, 3.142114068487727, 3.1419840230264824, 3.1418526763531838, 3.141722650303375, 3.1415964135203884, 3.1414762408150794, 3.14136417827713, 3.1412620145379946, 3.1411712584461156, 3.141093123277591, 3.141028517472117, 3.1409780417573874, 3.1409419924074196, 3.1409203702730704, 3.14091289512822, 3.1409190247937304, 3.1409379784343554, 3.140968763371927, 3.141010204721531, 3.141060977136177, 3.141119637939019, 3.14118466093033, 3.14125447017785, 3.141327473133087, 3.1414020924613073, 3.1414767960276273, 3.1415501245448314, 3.141620716457942, 3.1416873297152264, 3.1417488601528545, 3.141804356299738, 3.141853030488232, 3.141894266233818, 3.1419276219214476, 3.14195283090628, 3.141969798201178, 3.14197859398144, 3.1419794441880304, 3.1419727185533985, 3.1419589164084867, 3.1419386506552223, 3.1419126303059306, 3.1418816419994484, 3.14184653090375, 3.1418081814069145, 3.141767497982866, 3.141725386596102, 3.141682736981448, 3.1416404061014704, 3.1415992030465354, 3.141559875601516, 3.1415230986598073, 3.141489464620505, 3.141459475859404, 3.141433539319656, 3.1414119632244026, 3.141394955872247, 3.141382626437771, 3.1413749876640353, 3.141371960302605, 3.141373379129682, 3.1413790003444957, 3.1413885101386425, 3.1414015342125396, 3.1414176480075318, 3.141436387419585, 3.141457259762413, 3.141479754754385, 3.1415033553140286, 3.141527547963121, 3.1415518326538447, 3.141575731856542, 3.1415987987669878, 3.1416206245161535, 3.1416408442904684, 3.1416591422963647, 3.1416752555285514, 3.1416889763268117, 3.141700153730389, 3.1417086936620455, 3.1417145579951127, 3.141717762575995, 3.141718374291459, 3.141716507284252, 3.141712318432183, 3.1417060022145438, 3.141697785095646, 3.141687919558364, 3.141676677920929, 3.141664346067952, 3.141651217221944, 3.141637585874728, 3.141623741989168, 3.141609965570999, 3.141596521698539, 3.1415836560848103, 3.1415715912326676, 3.1415605232289456, 3.1415506192090676, 3.141542015508869, 3.1415348165062285, 3.1415290941415606, 3.1415248880934734, 3.1415222065743333, 3.1415210277000996, 3.1415213013798495, 3.1415229516628465, 3.1415258794752865, 3.141529965674391, 3.1415350743449526, 3.141541056262345, 3.141547752446421, 3.1415549977326584, 3.1415626242901595, 3.1415704650205636, 3.1415783567774187, 3.1415861433520793, 3.1415936781792784, 3.1416008267233178, 3.141607468513913, 3.1416134988090727, 3.141618829870759, 3.1416233918472907, 3.141627133264436, 3.1416300211346404, 3.1416320407008276, 3.1416331948375467, 3.141633503137773, 3.141633000718429, 3.141631736781591, 3.141629772971273, 3.1416271815677286, 3.1416240435623557, 3.1416204466565114, 3.1416164832269042, 3.141612248298831, 3.141607837566365, 3.141603345495757, 3.1415988635449827, 3.14159447852841, 3.141590271151489, 3.1415863147356298, 3.141582674148922, 3.141579404953522, 3.141576552775759, 3.1415741529004078, 3.141572230086132, 3.141570798594965, 3.1415698624247947, 3.1415694157305176, 3.1415694434164307, 3.141569921880036, 3.1415708198853833, 3.1415720995426555, 3.141573717369738, 3.1415756254111042, 3.1415777723894736, 3.141580104866152, 3.1415825683870757, 3.1415851085929227, 3.141587672273395, 3.1415902083478744, 3.141592668756914, 3.1415950092515157, 3.1415971900698416, 3.141599176493603, 3.14160093927914, 3.1416024549609234, 3.1416037060277255, 3.1416046809742544, 3.14160537423327, 3.141605785995349, 3.14160592192524, 3.1416057927853656, 3.1416054139783434, 3.1416048050213634, 3.141603988965954, 3.141602991777119, 3.1416018416859064, 3.141600568529307, 3.141599203090971, 3.1415977764555327, 3.141596319388456, 3.141594861752261, 3.141593431968716, 3.1415920565352327, 3.1415907596022676, 3.1415895626169914, 3.1415884840369284, 3.1415875391157617, 3.1415867397619723, 3.14158609446948, 3.1415856083182168, 3.1415852830411355, 3.1415851171531854, 3.141585106136684, 3.1415852426767596, 3.1415855169398417, 3.1415859168876534, 3.1415864286189157, 3.141587036730698, 3.141587724691476, 3.1415884752180245, 3.1415892706486295, 3.141590093305542, 3.141590925840095, 3.1415917515546696, 3.1415925546962846, 3.1415933207175453, 3.1415940365014037, 3.1415946905471315, 3.141595273115767, 3.141595776334176, 3.1415961942577, 3.141596522892203, 3.1415967601770447, 3.1415969059312188, 3.141596961765492, 3.141596930963921, 3.1415968183385266, 3.141596630061272, 3.1415963734777197, 3.1415960569068826, 3.1415956894318535, 3.141595280685715, 3.141594840637158, 3.14159437937997, 3.141593906930349, 3.141593433035549, 3.141592966997089, 3.1415925175112314, 3.1415920925290086, 3.141591699137582, 3.1415913434641682, 3.1415910306033705, 3.141590764568134, 3.1415905482641606, 3.1415903834871424, 3.141590270941753, 3.141590210280948, 3.1415902001638765, 3.141590238330304, 3.141590321689341, 3.1415904464200373, 3.1415906080813056, 3.141590801728589, 3.141591022034642, 3.141591263411921, 3.1415915201340727, 3.1415917864542355, 3.1415920567179825, 3.1415923254689715, 3.1415925875455977, 3.1415928381672185, 3.141593073008753, 3.141593288262783]
        # theta = angles[0]*DEGREES
        theta = angles[0]+np.pi
        self.pendulum.rotate(theta, about_point = self.pivot.get_center())
        self.add(self.pendulum)
        self.wait(2)
        for i in range(1,len(angles)):
            # dtheta = (angles[i]-angles[i-1])*DEGREES
            dtheta = (angles[i]-angles[i-1])
            self.pendulum.rotate(dtheta, about_point = self.pivot.get_center())
            self.wait(0.1)

        self.wait(3)
    def setup(self):
        self.normal = DashedLine(start = 2*DOWN, end = 2*UP, color = GREEN_E, stroke_width = 6)
        self.bob = Circle(radius = 0.2, color = GREY, fill_color = GREY, fill_opacity = 1, sheen_factor = 1, sheen_direction = UL).shift(2*UP)
        self.rod = Line(start = 2*DOWN, end = self.bob.get_center(), stroke_width=4)
        self.pivot = SmallDot(self.rod.get_start(), color = RED)
        self.add(self.normal, self.pivot)
